<f:view xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui"
		xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:form rendered="#{facesUtil.userLoggedIn}">
		<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<h:outputLink styleClass="navbar-brand" value="#{facesUtil.rootContext}" rendered="#{!facesUtil.adminView}">#{msg['homepage']}</h:outputLink>
					<h:outputLink styleClass="navbar-brand" value="#{facesUtil.rootContext}" rendered="#{facesUtil.adminView}" title="#{msg['go-back']}"><i class="fa fa-arrow-circle-left"></i></h:outputLink>
					<h:outputLink styleClass="navbar-brand" value="#{facesUtil.prefixWithContext('admin')}" rendered="#{facesUtil.adminView}">#{msg['control-panel']}</h:outputLink>
				</div>

				<div class="collapse navbar-collapse" id="navbar-collapse">
					<ul class="nav navbar-nav">
						<ui:fragment rendered="#{!facesUtil.adminView}">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">#{msg['add']} <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><p:commandLink value="#{msg['content']}" action="#{contentSelectorBean.initializeContent}" update=":content-selector-form" oncomplete="PF('contentSelectorDialog').show()"/></li>
								</ul>
							</li>
						</ui:fragment>
						<ui:fragment rendered="#{facesUtil.adminView}">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">#{siteContextBean.site.name} <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<ui:repeat value="#{siteContextBean.otherSites}" var="site">
										<li>
											<h:link outcome="#{view.viewId}" value="#{site.name}">
												<f:param name="s" value="#{site.friendlyUrl}"/>
											</h:link>
										</li>
									</ui:repeat>
								</ul>
							</li>
						</ui:fragment>
					</ul>
					<h:panelGroup layout="block" styleClass="controls-toggler navbar-left" rendered="#{!facesUtil.adminView}">
						<div class="checkbox">
							<label>
								<h:selectBooleanCheckbox id="controls-toggler" value="#{sessionDataBean.controlsActive}">
									<p:ajax/>
								</h:selectBooleanCheckbox>
								#{msg['toggle-controls']}
							</label>
						</div>
					</h:panelGroup>
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">#{msg['go-to']} <b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="#{facesUtil.rootContext}">#{msg['homepage']}</a></li>
								<li><a href="#{facesUtil.prefixWithContext('admin')}">#{msg['control-panel']}</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Administrator <b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#{facesUtil.prefixWithContext('j_spring_security_logout')}">#{msg['sign-out']}</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</h:form>
	<p:dialog modal="true" widgetVar="contentSelectorDialog" header="#{msg['select-content']}" resizable="false" draggable="false" rendered="#{facesUtil.userLoggedIn and !facesUtil.adminView}">
		<h:form id="content-selector-form">
			<p:dataTable value="#{contentSelectorBean.items}" var="item" tableStyleClass="table table-striped content-selector" selectionMode="single" selection="#{contentSelectorBean.item}" rowKey="#{item.id}" sortBy="#{item.modifiedDate}" sortOrder="descending">
				<p:ajax event="rowSelect" listener="#{contentSelectorBean.onRowSelect}" update=":dashboard" oncomplete="PF('contentSelectorDialog').hide()"/>
				<p:column headerText="#{msg['title']}" sortBy="#{item.title}">
					#{item.title}
				</p:column>
				<p:column headerText="#{msg['modified-date']}" sortBy="#{item.modifiedDate}">
					<h:outputText value="#{item.modifiedDate}">
						<f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
					</h:outputText>
				</p:column>
			</p:dataTable>
		</h:form>
	</p:dialog>
</f:view>